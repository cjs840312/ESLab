<html>
   <head>
      <script src="/socket.io/socket.io.js">
      </script>
   </head>
   <body>
      <h1> Chat Room ~ </h1>
      <textarea name="username" rows="2" cols="10" id="username"></textarea>
      <input type="button" value="name" id="pass_name"/>

      <textarea  rows="2" cols="10" id="receiver"></textarea>


      <div id="ChatScreen" style="width:497px;height:200px;border:1px #000000 solid; overflow:auto; white-space: pre-line;word-break: break-all;"></div>

      <br>

      <form method="post">
         <textarea name="text" rows="5" cols="60" id="message"></textarea>
         <input type="button" value="Send" id="SendButton"/>
      </form>


      <script>
         var socket = io.connect();
         var name;
         var screen = document.getElementById("ChatScreen");

         var pass_name= document.getElementById("pass_name");         
         pass_name.addEventListener("click",function(){
            console.log('pass_name')
            name= document.getElementById("username").value;
            socket.emit("myName",name);
         })


         var SendButton= document.getElementById("SendButton");         
         SendButton.addEventListener("click",function(){
            console.log('Sending Message')         
            var message= document.getElementById("message").value;
            var receiver=document.getElementById("receiver").value

            socket.emit("Message",{receiver:receiver,"message":message});
            document.getElementById("message").value="";
            screen.textContent +=(name+": "+message+"\n"); 
         })


         
         socket.on("Message",function(Data){
            console.log('Printing Message') 
            var sender=Data.sender 
            var message=Data.message
            screen.textContent +=(sender+": "+message+"\n"); 
         })

      </script>

   </body>
</html>